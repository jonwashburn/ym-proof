name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Lean cache (optional)
        run: |
          echo "(cache step optional)"
      - name: Build
        run: |
          lake build
      - name: Compile pipeline examples (typecheck)
        run: |
          sed -n '1,120p' ym/Pipeline.lean >/dev/null
          sed -n '1,120p' ym/Examples.lean >/dev/null
      - name: Axiom check
        run: |
          if grep -R "^axiom\b" -n ym || grep -R "sorry" -n ym; then
            echo "Found axioms or sorries"; exit 1; fi


